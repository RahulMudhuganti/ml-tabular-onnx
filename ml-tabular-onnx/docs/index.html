
<!doctype html><html><head><meta charset='utf-8'>
<title>ONNX Demo</title>
<script src='https://cdn.jsdelivr.net/npm/onnxruntime-web/dist/ort.min.js'></script>
<style>
body{font-family:sans-serif;margin:2rem;max-width:1000px;}
.card{border:1px solid #ccc;padding:1rem;border-radius:10px;margin-bottom:2rem;}
.grid{display:grid;grid-template-columns:repeat(auto-fit,minmax(180px,1fr));gap:8px;}
input{width:100%;padding:4px;border-radius:6px;border:1px solid #ccc;}
button{padding:8px 12px;border-radius:8px;}
</style></head><body>
<h1>ONNX Regression & Classification Demo</h1>

<div class='card' id='reg'>
<h2>Regression: California Housing</h2><div class='grid' id='reg-form'></div>
<button id='reg-run'>Predict</button><div id='reg-out'></div></div>

<div class='card' id='cls'>
<h2>Classification: Breast Cancer</h2><div class='grid' id='cls-form'></div>
<button id='cls-run'>Predict</button><div id='cls-out'></div></div>

<script>
async function setup(section,jsonPath,onnxPath,isReg){
 const dep=await fetch(jsonPath).then(r=>r.json());
 const form=document.getElementById(section+'-form');
 const inputs={}; dep.feature_names.forEach(f=>{
   const inp=document.createElement('input');inp.placeholder=f;form.appendChild(inp);inputs[f]=inp;
 });
 const btn=document.getElementById(section+'-run');
 btn.onclick=async()=>{
   const vals=dep.feature_names.map((f,i)=>(parseFloat(inputs[f].value)-dep.scaler_mean[i])/dep.scaler_scale[i]);
   const tensor=new ort.Tensor('float32',Float32Array.from(vals),[1,dep.feature_names.length]);
   const session=await ort.InferenceSession.create(onnxPath);
   const out=await session.run({input:tensor});
   if(isReg){
     document.getElementById(section+'-out').innerText='Predicted Value: '+out.output.data[0].toFixed(3);
   }else{
     const arr=Array.from(out.logits.data);const exps=arr.map(Math.exp);
     const p=exps.map(e=>e/exps.reduce((a,b)=>a+b));
     document.getElementById(section+'-out').innerText='Predicted Class: '+p.indexOf(Math.max(...p))+' ('+Math.max(...p).toFixed(3)+')';
   }
 };
}
setup('reg','./regression/reg_deploy.json','./regression/reg_model.onnx',true);
setup('cls','./classification/cls_deploy.json','./classification/cls_model.onnx',false);
</script></body></html>
